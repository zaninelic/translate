<!-- v2 deploy-force 2026-02-16T22:00:00Z -->
<!DOCTYPE html>
<html lang="pt-BR">
<head><meta charset="UTF-8"><title>Versionador Init</title></head>
<body>
<script src="https://platform.staticpipefy.com/pipefy-app.js" onerror="console.error('[Versionador] Failed to load Pipefy SDK')"></script>
<script>
  console.log('[Versionador] SDK loaded:', typeof PipefyApp);
  var GITHUB_PAGES = 'https://zaninelic.github.io/pipefy-versioner';
  try {
    PipefyApp.initCall({
      'pipe-buttons': function(p, pipe) {
        console.log('[Versionador] pipe-buttons called', pipe);
        var pipeId = pipe && pipe.id ? pipe.id : '';
        return [
          {
            icon: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FFFFFF'%3E%3Cpath d='M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z'/%3E%3C/svg%3E",
            text: 'Vers√µes',
            callback: function(p) {
              console.log('[Versionador] Opening sidebar for pipe:', pipeId);
              p.sidebar({
                title: 'Versionador de Pipes',
                url: GITHUB_PAGES + '/sidebar.html?pipeId=' + encodeURIComponent(pipeId)
              });
            }
          },
          {
            icon: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FFFFFF'%3E%3Cpath d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'/%3E%3C/svg%3E",
            text: 'Snapshot',
            callback: function(p) {
              console.log('[Versionador] Opening snapshot for pipe:', pipeId);
              p.sidebar({
                title: 'Criar Snapshot',
                url: GITHUB_PAGES + '/snapshot.html?pipeId=' + encodeURIComponent(pipeId)
              });
            }
          }
        ];
      }
    });
    console.log('[Versionador] initCall registered successfully');
  } catch(e) {
    console.error('[Versionador] initCall error:', e);
  }
</script>
</body>
</html>
